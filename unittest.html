<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="Unittest is a built-in testing framework for Python."><!-- Bing --><meta name="msvalidate.01" content="45CBBE1BD8265A2217DFDA630EB8F84A" /><title>Tiny Brain Fans - Unittest</title><link rel="stylesheet" href="./tinystyle.css"><link rel="stylesheet alternate" href="./styles.css" title="Modern"></head><body>
<main id="main"><article id="content"><h1 id="title">Unittest</h1><p><code>unittest</code> is a built-in <a href="testing.html">testing framework</a> for <a href="python.html">Python</a>.</p>
<h2>Getting Started</h2>
<p>Create a new file in the same folder as your program called <code>filename.test.py</code>. Import <code>unittest</code> as well as the main program in the test file.</p>
<pre><code class="language-python">import unittest
import my_program
</code></pre>
<p>Once you have these, you can create test cases and unit tests within them. The test cases are subclasses of <code>unittest.TestCase</code>, and the unit tests need to be named <code>test_</code> followed by whatever naming you want to use. Any method that does not start with <code>test_</code> will not be run.</p>
<p><code>setUp</code> and <code>tearDown</code> run at the beginning and end of each unit test. <code>setUpClass</code> and <code>tearDownClass</code> run at the beginning and end of each test case.</p>
<pre><code class="language-python">class WidgetTestCase(unittest.TestCase):
    def setUpClass()
  
    def setUp(self):
        self.widget = Widget(&#x27;The widget&#x27;)
        
    def tearDown(self):
        pass

    def test_default_widget_size(self):
        self.assertEqual(self.widget.size(), (50,50),
                         &#x27;incorrect default size&#x27;)

    # You can disable tests by using this decorator
    @unittest.skip(&quot;reason for skipping&quot;) # reason is not necessary
    def test_widget_resize(self):
        self.widget.resize(100,150)
        self.assertEqual(self.widget.size(), (100,150),
                         &#x27;wrong size after resize&#x27;)
</code></pre>
<p>You can run your test suite by running <code>python3 -m unittest</code> in the root directory of the program. This will search for files using <code>unittest</code> within the current directory.</p>
<h2>Mocking Input</h2>
<p>To mock a call to <code>input</code>, you can utilize <code>mock</code> in the <code>unittest</code> library. The <code>patch</code> decorator allows you to specify a default return.[4]</p>
<pre><code class="language-python">import unittest
from unittest.mock import patch


def answer(input=input):
    ans = input(&#x27;enter yes or no&#x27;)
    if ans == &#x27;yes&#x27;:
        return &#x27;you entered yes&#x27;
    if ans == &#x27;no&#x27;:
        return &#x27;you entered no&#x27;


class Test(unittest.TestCase):
    # get_input will return &#x27;yes&#x27; during this test
    @patch(&#x27;builtins.input&#x27;, return_value=&#x27;yes&#x27;)
    def test_answer_yes(self, input):
        self.assertEqual(answer(input=input), &#x27;you entered yes&#x27;)

    @patch(&#x27;builtins.input&#x27;, return_value=&#x27;no&#x27;)
    def test_answer_no(self, input):
        self.assertEqual(answer(input=input), &#x27;you entered no&#x27;)
</code></pre>
<h2>References</h2>
<ol>
<li><a href="https://docs.python.org/3/library/unittest.html" target="_blank">https://docs.python.org/3/library/unittest.html</a></li>
<li><a href="https://docs.python.org/3/library/unittest.html#skipping-tests-and-expected-failures" target="_blank">https://docs.python.org/3/library/unittest.html#skipping-tests-and-expected-failures</a></li>
<li><a href="https://stackoverflow.com/questions/2066508/disable-individual-python-unit-tests-temporarily" target="_blank">https://stackoverflow.com/questions/2066508/disable-individual-python-unit-tests-temporarily</a></li>
<li><a href="https://stackoverflow.com/questions/21046717/python-mocking-raw-input-in-unittests" target="_blank">https://stackoverflow.com/questions/21046717/python-mocking-raw-input-in-unittests</a></li>
</ol>

<p class="last-modified">Last modified: 202111281101</p></article></main><footer><nav><p><a href="index.html">Sitemap</a></p></nav><div class="social"><p>Built using <a href="http://github.com/milofultz/swiki" target="_blank" rel="noopener noreferrer">{{SWIKI}}</a></p><p><a href="http://github.com/milofultz/" target="_blank" rel="noopener noreferrer">GitHub</a></p><p><a href="http://milofultz.com/" target="_blank" rel="noopener noreferrer">milofultz.com</a></p><p><a href="https://merveilles.town/@milofultz" target="_blank" rel="me noopener noreferrer">Mastodon</a></p></div></footer></body></html>
